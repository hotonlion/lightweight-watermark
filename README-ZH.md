[EN](https://hotonlion.github.io/lightweight-watermark/) | [ZH](https://hotonlion.github.io/lightweight-watermark/README-ZH.html)



<p align="center">
  <a href="https://hotonlion.github.io/lightweight-watermark/">
    <img src="./static/logo.png" alt="lightweight watermark" />
  </a>
</p>


# Lightweight Watermark

ä¸€ä¸ª**é›¶ä¾èµ–**çš„ ES6 JavaScript ç±»åº“ï¼Œç”¨äºåœ¨ç½‘é¡µä¸­æ·»åŠ **æŒä¹…æ€§æ–‡å­—æ°´å°**ã€‚ 

æ°´å°ä½¿ç”¨ `<canvas>` ç»˜åˆ¶å¹¶ä½œä¸ºå¹³é“ºèƒŒæ™¯æ˜¾ç¤ºï¼Œæ”¯æŒåœ¨ DOM è¢«åˆ é™¤æ—¶è‡ªåŠ¨æ¢å¤ã€‚



## âœ¨ ç‰¹ç‚¹

- **é›¶ä¾èµ–** â€” çº¯åŸç”Ÿ JavaScript å®ç°
- **æŒä¹…ä¿æŠ¤** â€” ä½¿ç”¨ `MutationObserver` ç›‘å¬å¹¶æ¢å¤è¢«åˆ é™¤çš„æ°´å°
- **é«˜åº¦å¯å®šåˆ¶** â€” å¯é…ç½®æ–‡å­—ã€å­—ä½“ã€å¤§å°ã€ç²—ç»†ã€é¢œè‰²ã€æ—‹è½¬è§’åº¦ã€å±‚çº§
- **æ€§èƒ½å‹å¥½** â€” ç”Ÿæˆå•ä¸ªå°å›¾ç‰‡å¹³é“ºæ˜¾ç¤ºï¼Œè€Œä¸æ˜¯é‡å¤åˆ›å»º DOM å…ƒç´ 
- **å†…ç½®æ ¡éªŒ** â€” è¾“å…¥å‚æ•°ä¸¥æ ¼æ ¡éªŒå¹¶æä¾›é”™è¯¯ç 
- **å¹¿æ³›å…¼å®¹** â€” å…¼å®¹ç°ä»£æµè§ˆå™¨



## ğŸ“¦ å®‰è£…

ä½¿ç”¨ `npm`ï¼š

```bash
npm install lw-watermark
```



## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç¤ºä¾‹

```js
import Watermark from 'lw-watermark';

const wm = new Watermark({
  content: 'ä»…ä¾›å†…éƒ¨ä½¿ç”¨',
  font: 'Arial',
  fontSize: 24,
  fontWeight: 'bold',
  rotate: 30,
  color: 'rgba(255, 0, 0, 0.15)',
  zIndex: 999999999
});

wm.create()
  .then(() => console.log('æ°´å°å·²æ·»åŠ ï¼'))
  .catch(err => console.error('æ°´å°é”™è¯¯ï¼š', err));
```

### å‚æ•°è¯´æ˜

| å‚æ•°         | ç±»å‹                 | é»˜è®¤å€¼                 | è¯´æ˜                                           |
| ------------ | -------------------- | ---------------------- | ---------------------------------------------- |
| `content`    | `string`             | `"lw-watermark"`       | æ°´å°æ–‡å­—å†…å®¹                                   |
| `font`       | `string`             | `"serif"`              | CSS å­—ä½“åç§°                                   |
| `fontSize`   | `number` \| `string` | `30`                   | å­—ä½“å¤§å°ï¼ˆåƒç´ ï¼‰                               |
| `fontWeight` | `string` \| `number` | `"normal"`             | å­—ä½“ç²—ç»†ï¼ˆå¦‚ï¼š`normal`ã€`bold`ã€`300`ã€`700`ï¼‰ |
| `rotate`     | `number`             | `30`                   | æ—‹è½¬è§’åº¦ï¼ˆåº¦æ•°ï¼‰                               |
| `color`      | `string` (rgba)      | `"rgba(0, 0, 0, 0.6)"` | æ°´å°é¢œè‰²ï¼ˆå¿…é¡»ä¸º rgba æ ¼å¼ï¼‰                   |
| `zIndex`     | `number`             | `999999999`            | CSS z-index                                    |
| `maxLength`  | `number`             | `30`                   | æ°´å°æ–‡å­—æœ€å¤§é•¿åº¦                               |


### æ–¹æ³•

- `create()`: Promise`<void>`

  åˆ›å»ºå¹¶æ·»åŠ æ°´å°ã€‚
  è¿”å›ä¸€ä¸ª Promiseï¼Œå½“æ°´å°æˆåŠŸæ·»åŠ æ—¶ä¼š resolveã€‚

- `destroy()`: `void`

  é”€æ¯æ°´å°å¹¶åœæ­¢ DOM ç›‘å¬ã€‚

### é”™è¯¯ç 

ç±»ä¼šæŠ›å‡ºè‡ªå®šä¹‰çš„ ErrorMessage å¯¹è±¡ï¼ŒåŒ…å« code å’Œ messageã€‚

| é”™è¯¯ç     | æè¿°                       |
| ------ | ------------------------ |
| `1011` | æ°´å°æ–‡å­—è¶…è¿‡æœ€å¤§é•¿åº¦               |
| `1021` | `content` å¿…é¡»æ˜¯ `string` ç±»å‹       |
| `1022` | `fontSize` å¿…é¡»æ˜¯ `string`/ `number` ç±»å‹   |
| `1023` | `fontWeight` å¿…é¡»æ˜¯ `string`/ `number` ç±»å‹ |
| `1031` | `fontSize` æ ¼å¼æ— æ•ˆ          |
| `1032` | `fontWeight` æ ¼å¼æ— æ•ˆ        |
| `1033` | é¢œè‰²æ ¼å¼æ— æ•ˆï¼ˆå¿…é¡»ä¸º rgba æ ¼å¼ï¼‰      |



## ä¼˜åŠ¿

é˜²ç¯¡æ”¹ï¼šå³ä½¿æœ‰äººé€šè¿‡å¼€å‘è€…å·¥å…·åˆ é™¤æ°´å°ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ¢å¤

è½»é‡é«˜æ•ˆï¼šæ— éœ€å¤–éƒ¨å›¾ç‰‡ï¼Œå®Œå…¨ç”± `<canvas>` åŠ¨æ€ç”Ÿæˆ

é«˜åº¦å¯å®šåˆ¶ï¼šå¯è°ƒæ•´æ–‡å­—ã€æ ·å¼ã€æ—‹è½¬ã€å±‚çº§

è·¨æµè§ˆå™¨æ”¯æŒï¼šåœ¨ Chromeã€Firefoxã€Edge ç­‰ç°ä»£æµè§ˆå™¨ä¸­è¿è¡Œè‰¯å¥½

ä¸å¹²æ‰°æ“ä½œï¼šé€šè¿‡ pointer-events: none é¿å…é˜»æŒ¡ç‚¹å‡»å’Œ UI äº¤äº’



## è®¸å¯è¯

MIT

> æç¤ºï¼šæ°´å°æ˜¯ä¸€ç§**è§†è§‰é˜²æŠ¤**æ‰‹æ®µï¼Œæ— æ³•å®Œå…¨é˜»æ­¢æˆªå±æˆ–å¤åˆ¶ï¼Œä½†å¯ä»¥æœ‰æ•ˆèµ·åˆ°æé†’å’Œé˜²æ­¢éšæ„ä¼ æ’­çš„ä½œç”¨ã€‚

